<!-- Categories Section -->
<section class="categories-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">ì¹´í…Œê³ ë¦¬ë³„ ì•„ì´ë””ì–´</h2>
            <p class="section-subtitle">ê´€ì‹¬ ìˆëŠ” ë¶„ì•¼ì˜ ì•„ì´ë””ì–´ë¥¼ ì‰½ê²Œ ì°¾ì•„ë³´ì„¸ìš”</p>
            <a href="/pages/tags/list.html" class="section-link">
                <span class="link-text">ëª¨ë“  íƒœê·¸ ë³´ê¸°</span>
                <span class="link-icon">â†’</span>
            </a>
        </div>
        
        <div class="categories-grid">
            <?php 
            $categories = isset($categories) ? $categories : [
                [
                    'name' => 'ê¸°ìˆ ',
                    'icon' => 'ğŸ’»',
                    'description' => 'IT, í”„ë¡œê·¸ë˜ë°, ê°œë°œ ê´€ë ¨ ì•„ì´ë””ì–´',
                    'count' => 0,
                    'color' => '#3498db'
                ],
                [
                    'name' => 'ë””ìì¸',
                    'icon' => 'ğŸ¨',
                    'description' => 'UI/UX, ê·¸ë˜í”½, ì°½ì‘ ê´€ë ¨ ì•„ì´ë””ì–´',
                    'count' => 0,
                    'color' => '#e74c3c'
                ],
                [
                    'name' => 'ë¹„ì¦ˆë‹ˆìŠ¤',
                    'icon' => 'ğŸ’¼',
                    'description' => 'ì°½ì—…, ë§ˆì¼€íŒ…, ê²½ì˜ ê´€ë ¨ ì•„ì´ë””ì–´',
                    'count' => 0,
                    'color' => '#2ecc71'
                ],
                [
                    'name' => 'êµìœ¡',
                    'icon' => 'ğŸ“š',
                    'description' => 'í•™ìŠµ, êµìœ¡, ì—°êµ¬ ê´€ë ¨ ì•„ì´ë””ì–´',
                    'count' => 0,
                    'color' => '#f39c12'
                ],
                [
                    'name' => 'ë¼ì´í”„ìŠ¤íƒ€ì¼',
                    'icon' => 'ğŸ ',
                    'description' => 'ì¼ìƒ, ì·¨ë¯¸, ìƒí™œ ê´€ë ¨ ì•„ì´ë””ì–´',
                    'count' => 0,
                    'color' => '#9b59b6'
                ],
                [
                    'name' => 'í™˜ê²½',
                    'icon' => 'ğŸŒ±',
                    'description' => 'í™˜ê²½ë³´í˜¸, ì§€ì†ê°€ëŠ¥ì„± ê´€ë ¨ ì•„ì´ë””ì–´',
                    'count' => 0,
                    'color' => '#1abc9c'
                ],
                [
                    'name' => 'ê±´ê°•',
                    'icon' => 'ğŸ¥',
                    'description' => 'ì˜ë£Œ, ê±´ê°•, ì›°ë¹™ ê´€ë ¨ ì•„ì´ë””ì–´',
                    'count' => 0,
                    'color' => '#e67e22'
                ],
                [
                    'name' => 'ì—”í„°í…Œì¸ë¨¼íŠ¸',
                    'icon' => 'ğŸ¬',
                    'description' => 'ê²Œì„, ì˜í™”, ìŒì•… ê´€ë ¨ ì•„ì´ë””ì–´',
                    'count' => 0,
                    'color' => '#e91e63'
                ]
            ];
            ?>
            
            <?php foreach ($categories as $category): ?>
            <div class="category-card" style="--category-color: <?php echo $category['color']; ?>">
                <div class="category-header">
                    <div class="category-icon">
                        <span class="category-emoji"><?php echo $category['icon']; ?></span>
                    </div>
                    <div class="category-info">
                        <h3 class="category-name"><?php echo e($category['name']); ?></h3>
                        <p class="category-description"><?php echo e($category['description']); ?></p>
                    </div>
                </div>
                
                <div class="category-stats">
                    <div class="category-count">
                        <span class="count-number"><?php echo number_format($category['count']); ?></span>
                        <span class="count-label">ì•„ì´ë””ì–´</span>
                    </div>
                    <div class="category-trend">
                        <span class="trend-icon">ğŸ“ˆ</span>
                        <span class="trend-text">í™œë°œ</span>
                    </div>
                </div>
                
                <div class="category-actions">
                    <a href="<?php echo SITE_URL; ?>/pages/ideas/list.html?category=<?php echo urlencode($category['name']); ?>" class="category-link">
                        <span class="link-text">ì•„ì´ë””ì–´ ë³´ê¸°</span>
                        <span class="link-icon">â†’</span>
                    </a>
                    <div data-auth-required>
                        <a href="/pages/ideas/create.html?category=ê¸°ìˆ " class="category-action-btn">
                            <span class="btn-icon">âœï¸</span>
                            <span class="btn-text">ì‘ì„±í•˜ê¸°</span>
                        </a>
                    </div>
                </div>
                
                <!-- Category Preview -->
                <div class="category-preview">
                    <?php if (isset($category['recent_ideas']) && !empty($category['recent_ideas'])): ?>
                        <?php foreach (array_slice($category['recent_ideas'], 0, 2) as $idea): ?>
                        <div class="preview-item">
                            <span class="preview-icon">ğŸ’¡</span>
                            <span class="preview-title"><?php echo e(substr($idea['title'], 0, 30)); ?>...</span>
                        </div>
                        <?php endforeach; ?>
                    <?php else: ?>
                        <div class="preview-empty">
                            <span class="empty-text">ì•„ì§ ì•„ì´ë””ì–´ê°€ ì—†ìŠµë‹ˆë‹¤</span>
                        </div>
                    <?php endif; ?>
                </div>
            </div>
            <?php endforeach; ?>
        </div>
        
        <!-- Popular Tags -->
        <div class="popular-tags">
            <h3 class="tags-title">ì¸ê¸° íƒœê·¸</h3>
            <div class="tags-cloud">
                <?php 
                $popular_tags = isset($popular_tags) ? $popular_tags : [
                    ['name' => 'ì°½ì˜ì ', 'count' => 0],
                    ['name' => 'í˜ì‹ ', 'count' => 0],
                    ['name' => 'í˜‘ì—…', 'count' => 0],
                    ['name' => 'ë¬¸ì œí•´ê²°', 'count' => 0],
                    ['name' => 'íš¨ìœ¨ì„±', 'count' => 0],
                    ['name' => 'ì‚¬ìš©ìê²½í—˜', 'count' => 0],
                    ['name' => 'ì§€ì†ê°€ëŠ¥', 'count' => 0],
                    ['name' => 'ì ‘ê·¼ì„±', 'count' => 0]
                ];
                ?>
                <?php foreach ($popular_tags as $tag): ?>
                <a href="<?php echo SITE_URL; ?>/pages/tags/detail.html?tag=<?php echo urlencode($tag['name']); ?>" 
                   class="tag-cloud-item" 
                   style="font-size: <?php echo max(12, min(20, 12 + ($tag['count'] / 10))); ?>px;">
                    <span class="tag-text"><?php echo e($tag['name']); ?></span>
                    <span class="tag-count"><?php echo $tag['count']; ?></span>
                </a>
                <?php endforeach; ?>
            </div>
        </div>
    </div>
</section>
